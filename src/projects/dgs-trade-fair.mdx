import { Section } from "@/components/ui/section";
import { TechStackBadge } from "@/components/ui/tech-stack-badge";

export const metadata = {
    index: 0,
    title: 'DGS Trade Fair',
    description: "A web application for streamlining the application to, and advertisement of, the annual Drogheda Grammar School Trade Fair.",
    splash: "/projects/trade-fair/splash.png",
    github: null,
    href: "/dgs-trade-fair",
    liveUrl: "https://dgstradefair.ie",
    tags: ["Web"],
    year: "2021 - Present",
    coreTechnologies: ["TypeScript", "React", "NextJS", "Python", "Django", "Docker"],
    secondaryTechnologies: ["HTML", "SCSS", "TailwindCSS", "PostgreSQL", "Linux", "Nginx", "Google OAuth", "Jest", "Cypress", "Github CI"],
}

## Rationale

<Section id="rationale">

The Drogheda Grammar School hosts an annual Trade Fair, where students can apply to take part in a day-long Christmas market selling home made goods.

Managing the application process became cumbersome as the number of applications grew. So I was asked by the organiser to develop a solution to modernise it.

</Section>

### Features

<Section id="features">

- Authentication via email & Google OAuth, scoped to school email addresses.
- Automated email verification and password reset.
- Application submission in accordance with fair guidelines (e.g. stall contract, food safety form)
- Application status tracking.
- A dashboard for the organiser to approve/deny applications, with email notifications.
- A page for each student to advertise their stall & products, with the ability to edit (subject to approval)
- A pre-order system (no payment), including automated QR code generation for each order, allowing for easy pick-up.
- Mass messaging to all stallholders via email, and persisted messages via a blog with a bespoke [WYSIWYG](https://en.wikipedia.org/wiki/WYSIWYG) editor.

</Section>

## Impact

<Section id="impact">

The number of applications doubled in the first year the site was live (from \~30 to \~60), and the number of applications has continued to grow ever since. This year, there were \~100 applications.

The organiser also reported an exponential decrease in application management effort, allowing them to focus on the fair itself.

</Section>

## Architecture

<Section id="architecture">

![Image of architecture](/projects/trade-fair/architecture-diagram.png)

The application is split into 3 main components:

- <TechStackBadge technology="NextJS" inline /> frontend.
- <TechStackBadge technology="Django" inline /> backend, hosted on a <TechStackBadge technology="Linux" inline /> VPS using <TechStackBadge technology="Docker" inline />.
- 3rd party services - <TechStackBadge technology="Google OAuth" inline /> & mail provider.

</Section>

### Frontend

<Section id="frontend">

NextJS was the perfect candidate for the frontend, as most of the pages are static and can therefore benefit from Next's Incremental Static Regeneration (ISR). I was also familiar with Next, having previously used it to develop personal projects.

> Incremental Static Regeneration (ISR) enables you to:
>
> - Update static content without rebuilding the entire site
> - Reduce server load by serving prerendered, static pages for most requests
> - Ensure proper cache-control headers are automatically added to pages
> - Handle large amounts of content pages without long next build times
>
> \- NextJS documentation

The frontend is hosted on [Vercel](https://vercel.com), with automated deployment to production and staging environments.

</Section>

### Backend

<Section id="backend">

In a similar fashion to NextJS, Django was the perfect candidate for the backend, as it is a mature and well-tested framework with batteries included. I opted to pair it with Django Rest-Framework, which streamlined validation and database querying.

Docker Compose was used to containerise the application and its dependencies, with automated deployment to a VPS on Digital Ocean.

</Section>

### 3rd Party

<Section id="3rd party">

Offering authentication via Google OAuth vastly reduced the complexity registering new users. The mail provider is [Zoho](https://zoho.com), which was chosen primarily for its cost effectiveness.

</Section>


## Testing Strategy

<Section id="testing strategy">

The web application is tested using <TechStackBadge technology="Jest" inline /> for unit/integration tests and <TechStackBadge technology="Cypress" inline /> for e2e tests. Achieved 80% test coverage.

These are integrated into the repository's CI pipeline, aswell as locally using [Husky](https://typicode.github.io/husky/).

On the backend, I used Django's built in testing framework with similar CI integration.

</Section>
